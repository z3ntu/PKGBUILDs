# Maintainer: Luca Weiss <luca (at) z3ntu (dot) xyz>

pkgname=ubuntu-sdk-tools-bzr
_pkgname=ubuntu-sdk-tools
pkgver=r33
pkgrel=1
pkgdesc="Tools required by the Ubuntu SDK IDE"
url="https://launchpad.net/ubuntu-sdk-tools"
arch=("x86_64" "i686")
license=('LGPL2.1')
depends=()
makedepends=('go' 'bzr')
provides=("$_pkgname")
conflicts=("$_pkgname")

pkgver() {
  cd $srcdir/build/src/launchpad.net/ubuntu-sdk-tools
  printf "r%s" "$(bzr revno)"
}

prepare() {
  export GOPATH="$srcdir/build"

  go get -v launchpad.net/ubuntu-sdk-tools
}

build() {
  export GOPATH="$srcdir/build"

  go get -v launchpad.net/ubuntu-sdk-tools
  cd $GOPATH/src/launchpad.net/ubuntu-sdk-tools
  go install -v # I don't think this does anything useful but it's here anyways.
  cd usdk-target/
  go install -v
  cd ../usdk-wrapper/
  go install -v
}

package() {
  install -Dm755 $srcdir/build/bin/usdk-target $pkgdir/usr/bin/usdk-target
  install -Dm755 $srcdir/build/bin/usdk-wrapper $pkgdir/usr/bin/usdk-wrapper
}

# vim:set ts=2 sw=2 et:
