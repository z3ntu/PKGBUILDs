# Maintainer: Luca Weiss <luca (at) z3ntu (dot) xyz>

pkgname=ubuntu-sdk-tools-bzr
_pkgname=ubuntu-sdk-tools
pkgver=r27
pkgrel=1
pkgdesc=""
url=""
arch=('x86_64' 'i686')
license=('LGPL2.1')
depends=()
makedepends=('go' 'bzr')
# options='!emptydirs'
provides=("ubuntu-sdk-tools")
conflicts=("ubuntu-sdk-tools")
source=("bzr+lp:ubuntu-sdk-tools")
md5sums=('SKIP')

pkgver() {
  cd $srcdir/$_pkgname
  printf "r%s" "$(bzr revno)"
}

build() {
  export GOPATH="$srcdir/build"

  cd $srcdir/$_pkgname

  #download deps
  echo "go get: downloading dependencies..."
  go get -v -d

  echo "go build: building executable..."
  cd usdk-target/
  go get -v -d
  go build  # build is currently broken...
  cd ../usdk-wrapper/
  go get -v -d
  go build
}

package() {
  cd $srcdir/$_pkgname
  mkdir -p $pkgdir/usr/bin
#  cp usdk-target/usdk-target $pkgdir/usr/bin
  cp usdk-wrapper/usdk-wrapper $pkgdir/usr/bin
}

# vim:set ts=2 sw=2 et:
